apiVersion: topologies.eda.nokia.com/v1alpha1
kind: NetworkTopology
metadata:
  name: my-topology
  namespace: eda
spec:
  operation: replaceAll
  nodeTemplates:
    - name: leaf
      labels:
        eda.nokia.com/role: leaf
        eda.nokia.com/security-profile: managed
      annotations:
        topobuilder.eda.labs/name-prefix: leaf
      nodeProfile: srlinux-ghcr-25.10.1
      platform: 7220 IXR-D3L
    - name: spine
      labels:
        eda.nokia.com/role: spine
        eda.nokia.com/security-profile: managed
      annotations:
        topobuilder.eda.labs/name-prefix: spine
      nodeProfile: srlinux-ghcr-25.10.1
      platform: 7220 IXR-D5
  nodes:
    - name: leaf1
      template: leaf
      annotations:
        topobuilder.eda.labs/x: "360"
        topobuilder.eda.labs/y: "135"
    - name: leaf2
      template: leaf
      annotations:
        topobuilder.eda.labs/x: "570"
        topobuilder.eda.labs/y: "135"
    - name: leaf3
      template: leaf
      annotations:
        topobuilder.eda.labs/x: "465"
        topobuilder.eda.labs/y: "225"
  linkTemplates:
    - name: isl
      type: interSwitch
      speed: 25G
      encapType: "null"
      labels:
        eda.nokia.com/role: interSwitch
    - name: edge
      type: edge
      encapType: dot1q
      labels:
        eda.nokia.com/role: edge
  links:
    - name: testman1-esi-lag-1
      endpoints:
        - local:
            node: leaf1
            interface: ethernet-1-1
          sim:
            simNode: testman1
            simNodeInterface: eth1
        - local:
            node: leaf2
            interface: ethernet-1-1
          sim:
            simNode: testman1
            simNodeInterface: eth2
        - local:
            node: leaf3
            interface: ethernet-1-1
          sim:
            simNode: testman1
            simNodeInterface: eth3
      template: edge
  simulation:
    simNodeTemplates:
      - name: testman
        type: TestMan
      - name: multitool
        type: Linux
        image: ghcr.io/srl-labs/network-multitool:latest
    simNodes:
      - name: testman1
        template: testman
